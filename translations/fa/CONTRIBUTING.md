<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "bd4704f50c55da7d572b691484aa0b30",
  "translation_date": "2025-10-15T02:19:37+00:00",
  "source_file": "CONTRIBUTING.md",
  "language_code": "fa"
}
-->
# مشارکت در Co-op Translator

این پروژه از مشارکت‌ها و پیشنهادات استقبال می‌کند. اکثر مشارکت‌ها نیاز دارند که شما یک توافق‌نامه مجوز مشارکت‌کننده (CLA) را بپذیرید که اعلام می‌کند شما حق دارید و واقعاً به ما اجازه می‌دهید از مشارکت شما استفاده کنیم. برای جزئیات بیشتر به https://cla.opensource.microsoft.com مراجعه کنید.

وقتی یک Pull Request ارسال می‌کنید، یک ربات CLA به طور خودکار بررسی می‌کند که آیا نیاز به ارائه CLA دارید یا نه و PR را به طور مناسب نشانه‌گذاری می‌کند (مثلاً با وضعیت یا کامنت). کافی است دستورالعمل‌های ارائه‌شده توسط ربات را دنبال کنید. این کار را فقط یک بار برای همه مخازنی که از CLA ما استفاده می‌کنند باید انجام دهید.

## راه‌اندازی محیط توسعه

برای راه‌اندازی محیط توسعه این پروژه، توصیه می‌کنیم از Poetry برای مدیریت وابستگی‌ها استفاده کنید. ما از `pyproject.toml` برای مدیریت وابستگی‌های پروژه استفاده می‌کنیم، بنابراین برای نصب وابستگی‌ها باید از Poetry استفاده کنید.

### ساخت محیط مجازی

#### با استفاده از pip

```bash
python -m venv .venv
```

#### با استفاده از Poetry

```bash
poetry init
```

### فعال‌سازی محیط مجازی

#### برای هر دو pip و Poetry

- ویندوز:

    ```bash
    .venv\Scripts\activate.bat
    ```

- مک/لینوکس:

    ```bash
    source .venv/bin/activate
    ```

#### با استفاده از Poetry

```bash
poetry shell
```

### نصب پکیج و پکیج‌های مورد نیاز

#### با استفاده از Poetry (از pyproject.toml)

```bash
poetry install
```

### تست دستی

قبل از ارسال PR، مهم است که عملکرد ترجمه را با مستندات واقعی تست کنید:

1. یک پوشه تست در دایرکتوری اصلی بسازید:
    ```bash
    mkdir test_docs
    ```

2. مقداری مستندات مارک‌داون و تصاویری که می‌خواهید ترجمه کنید را به پوشه تست کپی کنید. برای مثال:
    ```bash
    cp /path/to/your/docs/*.md test_docs/
    cp /path/to/your/images/*.png test_docs/
    ```

3. پکیج را به صورت محلی نصب کنید:
    ```bash
    pip install -e .
    ```

4. Co-op Translator را روی اسناد تست خود اجرا کنید:
    ```bash
    python -m co_op_translator --language-codes ko --root-dir test_docs
    ```

5. فایل‌های ترجمه‌شده را در `test_docs/translations` و `test_docs/translated_images` بررسی کنید تا مطمئن شوید:
   - کیفیت ترجمه مناسب است
   - کامنت‌های متادیتا صحیح هستند
   - ساختار اصلی مارک‌داون حفظ شده است
   - لینک‌ها و تصاویر به درستی کار می‌کنند

این تست دستی کمک می‌کند مطمئن شوید تغییرات شما در شرایط واقعی به خوبی کار می‌کند.

### متغیرهای محیطی

1. یک فایل `.env` در دایرکتوری اصلی با کپی کردن فایل `.env.template` بسازید.
1. متغیرهای محیطی را طبق راهنما پر کنید.

> [!TIP]
>
> ### گزینه‌های اضافی برای محیط توسعه
>
> علاوه بر اجرای پروژه به صورت محلی، می‌توانید از GitHub Codespaces یا VS Code Dev Containers برای راه‌اندازی محیط توسعه جایگزین استفاده کنید.
>
> #### GitHub Codespaces
>
> می‌توانید این نمونه‌ها را به صورت مجازی با استفاده از GitHub Codespaces اجرا کنید و نیازی به تنظیمات اضافی نیست.
>
> این دکمه یک VS Code مبتنی بر وب را در مرورگر شما باز می‌کند:
>
> 1. قالب را باز کنید (ممکن است چند دقیقه طول بکشد):
>
>     <a href="https://codespaces.new/azure/co-op-translator"><img src="https://github.com/codespaces/badge.svg" alt="Open in GitHub Codespaces"></a>
>
> #### اجرای محلی با استفاده از VS Code Dev Containers
>
> ⚠️ این گزینه فقط زمانی کار می‌کند که Docker Desktop شما حداقل ۱۶ گیگابایت رم داشته باشد. اگر کمتر از ۱۶ گیگابایت رم دارید، می‌توانید گزینه [GitHub Codespaces](../..) را امتحان کنید یا [به صورت محلی راه‌اندازی کنید](../..).
>
> یک گزینه مرتبط VS Code Dev Containers است که پروژه را در VS Code محلی شما با استفاده از [افزونه Dev Containers](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers) باز می‌کند:
>
> 1. Docker Desktop را اجرا کنید (در صورت نیاز نصب کنید)
> 2. پروژه را باز کنید:
>
>    <a href="https://vscode.dev/redirect?url=vscode://ms-vscode-remote.remote-containers/cloneInVolume?url=https://github.com/azure/co-op-translator"><img src="https://img.shields.io/static/v1?style=for-the-badge&label=Dev%20Containers&message=Open&color=blue&logo=visualstudiocode" alt="Open in Dev Containers"></a>


### سبک کدنویسی

ما از [Black](https://github.com/psf/black) به عنوان فرمت‌کننده کد پایتون برای حفظ یکدستی سبک کد در پروژه استفاده می‌کنیم. Black یک فرمت‌کننده بی‌تعارف است که کد پایتون را به طور خودکار مطابق با سبک Black بازنویسی می‌کند.

#### پیکربندی

پیکربندی Black در فایل `pyproject.toml` ما مشخص شده است:

```toml
[tool.black]
line-length = 88
target-version = ['py310']
include = '\.pyi?$'
```

#### نصب Black

می‌توانید Black را با Poetry (توصیه‌شده) یا pip نصب کنید:

##### با استفاده از Poetry

Black به طور خودکار هنگام راه‌اندازی محیط توسعه نصب می‌شود:
```bash
poetry install
```

##### با استفاده از pip

اگر از pip استفاده می‌کنید، می‌توانید Black را مستقیماً نصب کنید:
```bash
pip install black
```

#### استفاده از Black

##### با Poetry

1. همه فایل‌های پایتون پروژه را فرمت کنید:
    ```bash
    poetry run black .
    ```

2. یک فایل یا پوشه خاص را فرمت کنید:
    ```bash
    poetry run black path/to/file_or_directory
    ```

##### با pip

1. همه فایل‌های پایتون پروژه را فرمت کنید:
    ```bash
    black .
    ```

2. یک فایل یا پوشه خاص را فرمت کنید:
    ```bash
    black path/to/file_or_directory
    ```

> [!TIP]
> توصیه می‌کنیم ویرایشگر خود را طوری تنظیم کنید که هنگام ذخیره، کد را به طور خودکار با Black فرمت کند. اکثر ویرایشگرهای مدرن این قابلیت را از طریق افزونه‌ها دارند.

## اجرای Co-op Translator

برای اجرای Co-op Translator با Poetry در محیط خود، مراحل زیر را دنبال کنید:

1. به دایرکتوری‌ای بروید که می‌خواهید تست ترجمه انجام دهید یا یک پوشه موقت برای تست بسازید.

2. دستور زیر را اجرا کنید. `-l ko` را با کد زبان مورد نظر خود جایگزین کنید. فلگ `-d` حالت دیباگ را فعال می‌کند.

    ```bash
    poetry run co-op-translator translate -l ko -d
    ```

> [!NOTE]
> مطمئن شوید محیط Poetry شما فعال است (poetry shell) قبل از اجرای دستور.

## افزودن زبان جدید

ما از مشارکت‌هایی که پشتیبانی از زبان‌های جدید را اضافه می‌کنند استقبال می‌کنیم. قبل از باز کردن PR، لطفاً مراحل زیر را کامل کنید تا بازبینی راحت‌تر انجام شود.

1. افزودن زبان به نگاشت فونت‌ها
   - فایل `src/co_op_translator/fonts/font_language_mappings.yml` را ویرایش کنید
   - یک ورودی با این موارد اضافه کنید:
     - `code`: کد زبان مشابه ISO (مثلاً `vi`)
     - `name`: نام نمایشی قابل فهم برای انسان
     - `font`: فونتی که در `src/co_op_translator/fonts/` وجود دارد و از اسکریپت پشتیبانی می‌کند
     - `rtl`: اگر راست به چپ است `true`، در غیر این صورت `false`

2. افزودن فایل‌های فونت مورد نیاز (در صورت نیاز)
   - اگر فونت جدیدی لازم است، سازگاری مجوز آن برای توزیع متن‌باز را بررسی کنید
   - فایل فونت را به `src/co_op_translator/fonts/` اضافه کنید

3. بررسی محلی
   - ترجمه را برای یک نمونه کوچک (مارک‌داون، تصاویر و نوت‌بوک‌ها در صورت نیاز) اجرا کنید
   - مطمئن شوید خروجی به درستی نمایش داده می‌شود، از جمله فونت و هرگونه چیدمان RTL در صورت نیاز

4. به‌روزرسانی مستندات
   - مطمئن شوید زبان در `getting_started/supported-languages.md` آمده است
   - نیازی به تغییر `README_languages_template.md` نیست؛ این فایل از لیست پشتیبانی‌شده تولید می‌شود

5. باز کردن PR
   - زبان اضافه‌شده و هرگونه ملاحظات مربوط به فونت/مجوز را توضیح دهید
   - در صورت امکان اسکرین‌شات خروجی‌های رندرشده را ضمیمه کنید

نمونه ورودی YAML:

```yaml
new_lang(code):
  name: "New Language"
  font: "NotoSans-Medium.ttf"
  rtl: false
```


## نگهدارندگان

### فرمت پیام کامیت و استراتژی ادغام

برای اطمینان از یکدستی و شفافیت در تاریخچه کامیت‌های پروژه، ما از یک فرمت خاص برای پیام کامیت **در پیام نهایی کامیت** هنگام استفاده از استراتژی **Squash and Merge** پیروی می‌کنیم.

وقتی یک Pull Request (PR) ادغام می‌شود، کامیت‌های جداگانه در یک کامیت ادغام می‌شوند. پیام نهایی کامیت باید مطابق فرمت زیر باشد تا تاریخچه تمیز و یکدست بماند.

#### فرمت پیام کامیت (برای squash and merge)

ما از فرمت زیر برای پیام‌های کامیت استفاده می‌کنیم:

```bash
<type>: <description> (#<PR number>)
```

- **type**: دسته‌بندی کامیت را مشخص می‌کند. ما از این دسته‌ها استفاده می‌کنیم:
  - `Docs`: برای به‌روزرسانی مستندات.
  - `Build`: برای تغییرات مربوط به سیستم ساخت یا وابستگی‌ها، شامل به‌روزرسانی فایل‌های پیکربندی، CI، یا Dockerfile.
  - `Core`: برای تغییرات در عملکرد اصلی پروژه یا ویژگی‌ها، به ویژه فایل‌های موجود در دایرکتوری `src/co_op_translator/core`.

- **description**: خلاصه‌ای کوتاه از تغییر.
- **PR number**: شماره Pull Request مرتبط با کامیت.

**نمونه‌ها**:

- `Docs: Update installation instructions for clarity (#50)`
- `Core: Improve handling of image translation (#60)`

> [!NOTE]
> در حال حاضر، پیشوندهای **`Docs`**، **`Core`** و **`Build`** به طور خودکار بر اساس برچسب‌های اعمال‌شده روی کد منبع به عناوین PR اضافه می‌شوند. تا زمانی که برچسب صحیح اعمال شده باشد، معمولاً نیازی به تغییر دستی عنوان PR ندارید. فقط کافی است بررسی کنید که همه چیز درست است و پیشوند به درستی تولید شده است.

#### استراتژی ادغام

ما از **Squash and Merge** به عنوان استراتژی پیش‌فرض برای Pull Requestها استفاده می‌کنیم. این استراتژی تضمین می‌کند که پیام‌های کامیت مطابق فرمت ما باشند، حتی اگر کامیت‌های جداگانه اینطور نباشند.

**دلایل**:

- تاریخچه پروژه تمیز و خطی می‌ماند.
- یکدستی در پیام‌های کامیت.
- کاهش نویز ناشی از کامیت‌های جزئی (مثلاً "fix typo").

هنگام ادغام، مطمئن شوید پیام نهایی کامیت مطابق فرمت توضیح داده‌شده باشد.

**نمونه Squash and Merge**
اگر یک PR شامل کامیت‌های زیر باشد:

- `fix typo`
- `update README`
- `adjust formatting`

باید به این صورت ادغام شوند:
`Docs: Improve documentation clarity and formatting (#65)`

---

**سلب مسئولیت**:
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. اگرچه ما برای دقت تلاش می‌کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطا یا نادقتی باشند. نسخه اصلی سند به زبان مادری آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، ترجمه انسانی حرفه‌ای توصیه می‌شود. ما هیچ مسئولیتی در قبال سوءتفاهم یا تفسیر نادرست ناشی از استفاده از این ترجمه نداریم.