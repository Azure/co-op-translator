<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "33db54f4f3ca9f0321be05374b591f2b",
  "translation_date": "2025-05-06T18:00:37+00:00",
  "source_file": "getting_started/command-line-guide/translator-your-project.md",
  "language_code": "ru"
}
-->
# Переводите свой проект с помощью Co-op Translator

**Co-op Translator** — это инструмент командной строки (CLI), который помогает переводить markdown-файлы и изображения в вашем проекте на несколько языков. В этом разделе объясняется, как пользоваться инструментом, описываются различные параметры CLI и приводятся примеры для разных сценариев.

> [!NOTE]
> Для полного списка команд и их подробного описания обратитесь к разделу [Command reference](./command-reference.md).

---

## Примеры сценариев и команд

Ниже приведены несколько распространённых вариантов использования **Co-op Translator** с соответствующими командами.

### 1. Базовый перевод (один язык)

Чтобы перевести весь проект (markdown-файлы и изображения) на один язык, например, корейский, используйте следующую команду:

```bash
translate -l "ko"
```

Эта команда переведёт все markdown и изображения на корейский, добавляя новые переводы без удаления существующих.

> [!TIP]
>
> Хотите узнать, какие коды языков поддерживает **Co-op Translator**? Посетите раздел [Supported Languages](https://github.com/Azure/co-op-translator#supported-languages) в репозитории для подробностей.

#### Пример на Phi-3 CookBook

В **Phi-3 CookBook** я использовал следующий способ для добавления корейского перевода к существующим markdown-файлам и изображениям.

```bash
(.venv) C:\Users\sms79\dev\Phi-3CookBook>translate -l"ko"
Translating images: 100%|███████████████████████████████████████████████████| 276/276 [1:09:56<00:00, 15.37s/it]
Translating markdown files: 100%|████████████████████████████████████████████████| 153/153 [1:43:07<00:00, 241.31s/it]
```

### 2. Перевод на несколько языков

Чтобы перевести проект на несколько языков (например, испанский, французский и немецкий), используйте команду:

```bash
translate -l "es fr de"
```

Эта команда переведёт проект на испанский, французский и немецкий, добавляя новые переводы без перезаписи существующих.

#### Пример на Phi-3 CookBook

В **Phi-3 CookBook**, после получения последних изменений для отражения свежих коммитов, я использовал следующий способ для перевода недавно добавленных markdown-файлов и изображений.

```bash
(.venv) C:\Users\sms79\dev\Phi-3CookBook>translate -l"ko ja zh tw es fr" -a
Translating images: 100%|███████████████████████████████████████████████████| 273/273 [1:09:56<00:00, 15.37s/it]
Translating markdown files: 100%|████████████████████████████████████████████████| 6/6 [24:07<00:00, 241.31s/it]
```

> [!NOTE]
> Хотя обычно рекомендуется переводить по одному языку за раз, в случаях, когда нужно добавить конкретные изменения, одновременный перевод на несколько языков может быть более эффективным.

### 3. Указание корневой директории

По умолчанию переводчик работает из текущей рабочей директории. Если проект находится в другом месте, укажите корневую директорию с помощью опции -r:

```bash
translate -l "es fr de" -r "./my_project"
```

Эта команда переводит файлы в `./my_project` into Spanish, French, and German.

### 4. Updating Translations (Deletes Existing Translations)

To update existing translations (i.e., delete the current translations and replace them with new ones), use the `-u` опция. Она удалит все существующие переводы для указанных языков и выполнит повторный перевод.

```bash
translate -l "ko" -u
```

Внимание: эта команда запросит подтверждение перед удалением существующих переводов.

#### Пример на Phi-3 CookBook

В **Phi-3 CookBook** я использовал следующий способ для обновления всех переведённых файлов на испанский язык. Рекомендую применять этот метод при значительных изменениях оригинального контента в нескольких markdown-документах. Если нужно обновить всего несколько переведённых файлов, эффективнее вручную удалить эти конкретные файлы, а затем использовать метод `-a` для добавления обновлённых переводов.

```bash
(.venv) C:\Users\sms79\dev\Phi-3CookBook>translate -l "es" -u
Warning: The update command will delete all existing translations for 'es' and re-translate everything.
Do you want to continue? Type 'yes' to proceed: yes
Proceeding with update...
Translating images: 100%|████████████████████████████████████████████| 150/150 [43:46<00:00, 15.55s/it]
Translating markdown files: 100%|███████████████████████████████████| 95/95 [1:40:27<00:00, 125.62s/it]
```

### 6. Перевод только изображений

Чтобы перевести только изображения в проекте, используйте опцию `-img`:

```bash
translate -l "ko" -img
```

Эта команда переведёт только изображения на корейский, не затрагивая markdown-файлы.

### 7. Перевод только markdown-файлов

Чтобы перевести только markdown-файлы, используйте опцию `-md`:

```bash
translate -l "ko" -md
```

### 8. Проверка переведённых файлов на ошибки

Если хотите проверить переведённые файлы на ошибки и при необходимости повторить перевод, используйте опцию `-chk`:

```bash
translate -l "ko" -chk
```

Эта команда просканирует переведённые markdown-файлы и повторит перевод для файлов с ошибками.

#### Пример на Phi-3 CookBook

В **Phi-3 CookBook** я использовал следующий способ для проверки ошибок перевода в корейских файлах и автоматического повторного перевода для файлов с обнаруженными проблемами.

```bash
(.venv) C:\Users\sms79\dev\Phi-3CookBook>translate -l"ko" -chk 
Checking translated files for errors in ko...
Checking files for ko: 100%|██████████████████████████████████████████████████| 95/95 [00:01<00:00, 65.47file/s]
Retrying vsc-extension-quickstart.md for ko:   0%|                                     | 0/17 [00:00<?, ?file/s] 
```

Эта опция проверяет ошибки перевода. На данный момент, если разница в переносах строк между оригиналом и переводом превышает шесть, файл считается содержащим ошибку перевода. В будущем планируется улучшить этот критерий для большей гибкости.

Например, этот метод полезен для выявления пропущенных частей или повреждённых переводов, и автоматически повторяет перевод таких файлов.

Однако, если вы уже знаете, какие файлы проблемные, эффективнее вручную удалить их и использовать опцию `-a` option to re-translate them.

### 9. Debug Mode

To enable detailed logging for troubleshooting, use the `-d`:

```bash
translate -l "ko" -d
```

Эта команда запускает перевод в режиме отладки, предоставляя дополнительную информацию в логах, которая поможет выявить проблемы в процессе перевода.

#### Пример на Phi-3 CookBook

В **Phi-3 CookBook** я столкнулся с проблемой, когда переводы с большим количеством ссылок в markdown-файлах приводили к ошибкам форматирования, таким как сломанные переводы и игнорируемые переносы строк. Для диагностики я использовал опцию `-d`, чтобы увидеть, как работает процесс перевода.

```bash
(.venv) C:\Users\sms79\dev\Phi-3CookBook>translate -l "ko" -d
DEBUG:openai._base_client:Request options: {'method': 'post', 'url': '/chat/completions', 'headers': {'api-key': 'af04e0bea45747d8a7b8c131c1971044'}, 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': "Translate the following text to ko. NEVER ADD ANY EXTRA CONTENT OUTSIDE THE TRANSLATION. TRANSLATE ONLY WHAT IS GIVEN TO YOU.. MAINTAIN MARKDOWN FORMAT\n\n# Phi-3 Cookbook: Hands-On Examples with Microsoft's Phi-3 Models [![Open and use the samples in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/microsoft/phi-3cookbook) [![Open in Dev Containers](https://img.shields.io/static/v1?style=for-the-badge&label=Dev%
...
```

### 10. Перевод на все языки

Если хотите перевести проект на все поддерживаемые языки, используйте ключевое слово all.

> [!WARNING]
> Перевод сразу на все языки может занять значительное время в зависимости от размера проекта. Например, перевод **Phi-3 CookBook** на испанский занял около 2 часов. Учитывая масштаб, одному человеку не под силу обработать 20 языков. Рекомендуется разделить работу между несколькими участниками, каждый из которых будет отвечать за один или два языка, и обновлять переводы постепенно.

```bash
translate -l "all"
```

Эта команда переведёт проект на все доступные языки. Если вы решите продолжить, перевод может занять много времени в зависимости от размера проекта.

> [!TIP]
>
> ### Удаление файлов, которые нужно обновить  
> Чтобы обновить файлы, недавно изменённые в Pull Request, первым шагом удалите все существующие версии конкретного файла в папках с переводами на разные языки. Это можно сделать массово с помощью следующей команды для удаления всех файлов с определённым именем в папках перевода.
>
> ### В Windows:
> 1. **Через Command Prompt**:
>    - Откройте Command Prompt.
>    - Перейдите в папку с файлами с помощью команды `cd`.
>    - Используйте следующую команду для удаления файлов:
>      ```
>      del /s *filename*
>      ```
>      Опция `/s` ищет файлы и в подкаталогах.
>
> 2. **Через PowerShell**:
>    - Откройте PowerShell.
>    - Выполните команду:
>      ```powershell
>      Get-ChildItem -Path "C:\YourPath" -Filter "*filename*" -Recurse | Remove-Item -Force
>      ```
>      Замените `"C:\YourPath"` with the folder path and `filename` with the specific name.
>
> ### On macOS/Linux:
> 1. **Using Terminal**:
>   - Open Terminal.
>   - Navigate to the directory with `cd`.
>   - Use the `find` командой:
>     ```bash
>     find . -type f -name "*filename*" -delete
>     ```
>     Замените `filename` with the specific name.
>
> Always double-check the files before deleting to avoid accidental loss. 
>
> Once you have deleted the files which need to be replace simply rerun your `translate -l` командой для обновления самых последних изменений файлов.

**Отказ от ответственности**:  
Этот документ был переведен с помощью сервиса автоматического перевода [Co-op Translator](https://github.com/Azure/co-op-translator). Несмотря на наши усилия по обеспечению точности, пожалуйста, имейте в виду, что автоматический перевод может содержать ошибки или неточности. Оригинальный документ на его исходном языке следует считать авторитетным источником. Для получения критически важной информации рекомендуется профессиональный перевод человеком. Мы не несем ответственности за любые недоразумения или неправильные толкования, возникшие в результате использования данного перевода.